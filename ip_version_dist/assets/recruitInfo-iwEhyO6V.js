import{s as u}from"./axios-T8ECj3ti.js";import{_ as D,x as C,c as l,a as o,y as I,F as w,q as L,b as n,w as c,e as v,r,o as d,t as h,f as M,p as N,g as T}from"./index-nMXVO1Yl.js";const z={components:{},data(){return{recruits:[],shows:{title:"",time:"",disc:"",content:""},drawer:!1,page:1,loading:!1,totalpages:-1}},mounted(){u.get(`/readrecruit?page=${this.page}`).then(e=>{this.recruits=e.data,this.totalpages=e.totalpages})},beforeUnmount(){},methods:{showRecruit(e){e.click++,this.drawer=!0,u.get(`/readrecruit?id=${e.id}`).then(t=>{this.shows={title:t.data.title,time:t.data.UpdatedAt,disc:t.data.summary,content:t.data.content}})},goBack(){this.drawer=!1},load(){!this.loading&&this.page<this.totalpages&&(this.loading=!0,console.log(this.page),u.get(`/readrecruit?page=${this.page+1}`).then(e=>{this.page++,e.data.forEach(t=>{this.recruits.push(t)}),this.totalpages=e.totalpages,this.$nextTick(()=>{this.loading=!1})}))},formatDate(e){const t=new Date(e),g=t.getFullYear(),m=(t.getMonth()+1).toString().padStart(2,"0"),s=t.getDate().toString().padStart(2,"0"),i=t.getHours().toString().padStart(2,"0"),_=t.getMinutes().toString().padStart(2,"0");return`${g}-${m}-${s} ${i}:${_}`}},watch:{drawer(e){e===!1&&(this.shows={title:"",time:"",disc:"",content:""})}}},p=e=>(N("data-v-be76df49"),e=e(),T(),e),F={class:"recruit p-2"},H=p(()=>o("h5",{class:"p-3"},"招聘市场",-1)),U=["infinite-scroll-disabled"],E={class:"d-flex flex-column"},R={style:{"font-size":"120%"}},j={class:"d-flex justify-content-between"},q={class:"d-flex align-items-center",style:{"font-size":"80%"}},A={key:0,class:"text-muted text-center w-100"},Y={key:1,class:"text-muted text-center w-100"},G=p(()=>o("small",null,"没有更多招聘信息了",-1)),J=[G],K={class:"text-large font-600 mr-3"},O={class:"w-100 text-end"},P=p(()=>o("hr",{class:"m-2 ms-0 me-0",style:{border:"1px solid #c3c3c3"}},null,-1)),Q=["innerHTML"];function W(e,t,g,m,s,i){const _=r("View"),f=r("el-icon"),x=r("el-card"),y=r("Loading"),k=r("el-page-header"),S=r("el-drawer"),b=C("infinite-scroll");return d(),l(w,null,[o("div",F,[H,I((d(),l("div",{style:{height:"100%"},"infinite-scroll-disabled":s.page>=s.totalpages},[(d(!0),l(w,null,L(s.recruits,(a,V)=>(d(),l("div",{key:a.id},[n(x,{class:"mb-2 recruit-card",style:{width:"100%"},shadow:"hover",onClick:B=>i.showRecruit(a)},{default:c(()=>[o("div",E,[o("h5",R,h(a.title),1),o("div",j,[o("div",null,h(a.summary),1),o("small",q,[n(f,null,{default:c(()=>[n(_)]),_:1}),M(h(a.click),1)])])])]),_:2},1032,["onClick"])]))),128))],8,U)),[[b,i.load]]),s.loading?(d(),l("div",A,[n(f,{class:"is-loading"},{default:c(()=>[n(y)]),_:1})])):v("",!0),s.page>=s.totalpages?(d(),l("div",Y,J)):v("",!0)]),n(S,{modelValue:s.drawer,"onUpdate:modelValue":t[0]||(t[0]=a=>s.drawer=a),"show-close":!1,size:"100%"},{header:c(({close:a,titleId:V,titleClass:B})=>[n(k,{onBack:i.goBack},{content:c(()=>[o("span",K,h(s.shows.title),1)]),_:1},8,["onBack"])]),default:c(()=>[o("div",null,h(s.shows.disc),1),o("div",O,[o("small",null,"更新日期："+h(i.formatDate(s.shows.time)),1)]),P,o("div",{innerHTML:s.shows.content},null,8,Q)]),_:1},8,["modelValue"])],64)}const $=D(z,[["render",W],["__scopeId","data-v-be76df49"]]);export{$ as default};
