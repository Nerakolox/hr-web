import{i as _,_ as A,s as b,c as E,d as e,w as s,b as C,r as g,o as U,g as v}from"./index-D49ookEs.js";import{u as S,w as R}from"./xlsx-DPk0xC4-.js";var D={exports:{}};(function(o,i){(function(h,f){f()})(_,function(){function h(a,n){return typeof n>"u"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function f(a,n,m){var r=new XMLHttpRequest;r.open("GET",a),r.responseType="blob",r.onload=function(){y(r.response,n,m)},r.onerror=function(){console.error("could not download file")},r.send()}function l(a){var n=new XMLHttpRequest;n.open("HEAD",a,!1);try{n.send()}catch{}return 200<=n.status&&299>=n.status}function u(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(n)}}var d=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof _=="object"&&_.global===_?_:void 0,t=d.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),y=d.saveAs||(typeof window!="object"||window!==d?function(){}:"download"in HTMLAnchorElement.prototype&&!t?function(a,n,m){var r=d.URL||d.webkitURL,c=document.createElement("a");n=n||a.name||"download",c.download=n,c.rel="noopener",typeof a=="string"?(c.href=a,c.origin===location.origin?u(c):l(c.href)?f(a,n,m):u(c,c.target="_blank")):(c.href=r.createObjectURL(a),setTimeout(function(){r.revokeObjectURL(c.href)},4e4),setTimeout(function(){u(c)},0))}:"msSaveOrOpenBlob"in navigator?function(a,n,m){if(n=n||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(h(a,m),n);else if(l(a))f(a,n,m);else{var r=document.createElement("a");r.href=a,r.target="_blank",setTimeout(function(){u(r)})}}:function(a,n,m,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),typeof a=="string")return f(a,n,m);var c=a.type==="application/octet-stream",T=/constructor/i.test(d.HTMLElement)||d.safari,x=/CriOS\/[\d]+/.test(navigator.userAgent);if((x||c&&T||t)&&typeof FileReader<"u"){var p=new FileReader;p.onloadend=function(){var w=p.result;w=x?w:w.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=w:location=w,r=null},p.readAsDataURL(a)}else{var k=d.URL||d.webkitURL,P=k.createObjectURL(a);r?r.location=P:location.href=P,r=null,setTimeout(function(){k.revokeObjectURL(P)},4e4)}});d.saveAs=y.saveAs=y,o.exports=y})})(D);var Q=D.exports;const j={components:{},data(){return{activeName:"工资表",incomePage:1,incomeTotal:0,incomeData:[],incomeQueryPage:1,incomeQueryTotal:0,incomeQueryData:[],recruitPage:1,recruitTotal:0,recruitData:[],query:{phone:"",title:""}}},mounted(){b.get(`/allsalary?page=${this.incomePage}`).then(o=>{this.incomeData=o.data,this.incomeTotal=o.total}),b.get(`/salaryreader?page=${this.incomeQueryPage}`).then(o=>{this.incomeQueryData=o.data,this.incomeQueryTotal=o.total}),b.get(`/recruitreader?page=${this.recruitPage}`).then(o=>{this.recruitData=o.data,this.recruitTotal=o.total})},beforeUnmount(){},methods:{handleClick(){},changeIncomePage(){b.get(`/allsalary?page=${this.incomePage}`).then(o=>{this.incomeData=o.data,this.incomeTotal=o.total})},changeIncomeQueryPage(){b.get(`/salaryreader?page=${this.incomeQueryPage}`).then(o=>{this.incomeQueryData=o.data,this.incomeQueryTotal=o.total})},changeRecruitPage(){b.get(`/recruitreader?page=${this.recruitPage}${this.query.title!=""?`&title=${this.query.title}`:""}${this.query.phone!=""?`&telephone=${this.query.phone}`:""}`).then(o=>{this.recruitData=o.data,this.recruitTotal=o.total})},exportToExcel(){const o=S.json_to_sheet(this.recruitData),i=S.book_new();S.book_append_sheet(i,o,"Sheet1");const h=R(i,{bookType:"xlsx",type:"binary"});function f(l){const u=new ArrayBuffer(l.length),d=new Uint8Array(u);for(let t=0;t<l.length;t++)d[t]=l.charCodeAt(t)&255;return u}Q.saveAs(new Blob([f(h)],{type:"application/octet-stream"}),`招聘信息查看表${this.formatDate()}.xlsx`)},formatDate(){const o=new Date,i=o.getFullYear(),h=(o.getMonth()+1).toString().padStart(2,"0"),f=o.getDate().toString().padStart(2,"0"),l=o.getHours().toString().padStart(2,"0"),u=o.getMinutes().toString().padStart(2,"0");return`${i}-${h}-${f} ${l}时${u}分`},clearQuery(){this.query={phone:"",title:""},this.changeRecruitPage()},delSalary(o){console.log(o.row.ID,o.$index),b.get(`/delete/salary?id=${o.row.ID}`).then(i=>{b.get(`/allsalary?page=${this.incomePage}`).then(h=>{this.incomeData=h.data,this.incomeTotal=h.total})})}}},q={class:"p-2"},L=C("h4",{class:"mb-4"},"信息管理",-1),B={class:"mt-2 d-flex"},V={class:"mt-2 d-flex"},F={class:"mt-2 d-flex"};function M(o,i,h,f,l,u){const d=g("el-divider"),t=g("el-table-column"),y=g("el-button"),a=g("el-table"),n=g("el-pagination"),m=g("el-tab-pane"),r=g("el-input"),c=g("el-form-item"),T=g("el-form"),x=g("el-tabs");return U(),E("div",q,[L,e(d,{"content-position":"left"},{default:s(()=>[v("信息管理 信息管理")]),_:1}),e(x,{modelValue:l.activeName,"onUpdate:modelValue":i[5]||(i[5]=p=>l.activeName=p),onTabClick:u.handleClick},{default:s(()=>[e(m,{label:"工资表",name:"工资表"},{default:s(()=>[e(a,{data:l.incomeData,stripe:"",border:"",style:{"max-width":"100%",width:"100%"}},{default:s(()=>[e(t,{fixed:"",prop:"Username",label:"姓名",width:"140"}),e(t,{fixed:"",prop:"Date",label:"日期",width:"120"}),e(t,{prop:"Certificate",label:"身份证",width:"180"}),e(t,{prop:"Telephone",label:"电话",width:"120"}),e(t,{prop:"CreditCard",label:"银行卡号",width:"180"}),e(t,{prop:"BasicSalary",label:"基本工资",width:"100"}),e(t,{prop:"AttendanceRequired",label:"应出勤天数",width:"100"}),e(t,{prop:"AttendanceActual",label:"实出勤天数",width:"100"}),e(t,{prop:"WorkHour",label:"总工时"}),e(t,{prop:"Performance",label:"绩效"}),e(t,{prop:"Allowance",label:"津贴"}),e(t,{prop:"Subsidy",label:"补助"}),e(t,{prop:"OvertimeSalary",label:"加班工资",width:"100"}),e(t,{prop:"Excitation",label:"正负激励",width:"100"}),e(t,{prop:"Discipline",label:"违纪扣款",width:"100"}),e(t,{prop:"Withholding",label:"代扣部分",width:"100"}),e(t,{prop:"BackPayment",label:"补发扣"}),e(t,{prop:"ShouldSalary",label:"应发工资",width:"100"}),e(t,{prop:"UtilitiesFee",label:"水电物业费",width:"100"}),e(t,{prop:"Tax",label:"个税"}),e(t,{prop:"AdvanceSalary",label:"预支工资",width:"100"}),e(t,{prop:"ActualSalary",label:"实发工资",width:"100"}),e(t,{fixed:"right",label:"操作"},{default:s(p=>[e(y,{type:"danger",size:"small",onClick:k=>u.delSalary(p,o.index)},{default:s(()=>[v(" 删除 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),C("div",B,[e(n,{class:"ms-auto",background:"",layout:"prev, pager, next","current-page":l.incomePage,"onUpdate:currentPage":i[0]||(i[0]=p=>l.incomePage=p),total:l.incomeTotal,onCurrentChange:u.changeIncomePage},null,8,["current-page","total","onCurrentChange"])])]),_:1}),e(m,{label:"查询工资统计",name:"查询工资统计"},{default:s(()=>[e(a,{data:l.incomeQueryData,stripe:"",border:"",style:{"max-width":"100%",width:"100%"}},{default:s(()=>[e(t,{fixed:"",prop:"Username",label:"姓名"}),e(t,{fixed:"",prop:"Telephone",label:"电话"}),e(t,{prop:"CreatedAt",label:"日期"})]),_:1},8,["data"]),C("div",V,[e(n,{class:"ms-auto",background:"",layout:"prev, pager, next","current-page":l.incomeQueryPage,"onUpdate:currentPage":i[1]||(i[1]=p=>l.incomeQueryPage=p),total:l.incomeQueryTotal,onCurrentChange:u.changeIncomeQueryPage},null,8,["current-page","total","onCurrentChange"])])]),_:1}),e(m,{label:"招聘信息点击统计",name:"招聘信息点击统计"},{default:s(()=>[e(T,{inline:!0,model:l.query,class:"demo-form-inline"},{default:s(()=>[e(c,{label:"手机号"},{default:s(()=>[e(r,{modelValue:l.query.phone,"onUpdate:modelValue":i[2]||(i[2]=p=>l.query.phone=p),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1}),e(c,{label:"招聘信息标题"},{default:s(()=>[e(r,{modelValue:l.query.title,"onUpdate:modelValue":i[3]||(i[3]=p=>l.query.title=p),placeholder:"请输入招聘信息标题"},null,8,["modelValue"])]),_:1}),e(c,null,{default:s(()=>[e(y,{type:"primary",onClick:u.changeRecruitPage,plain:""},{default:s(()=>[v("查询")]),_:1},8,["onClick"])]),_:1}),e(c,null,{default:s(()=>[e(y,{type:"info",plain:"",onClick:u.clearQuery},{default:s(()=>[v("重置筛选条件")]),_:1},8,["onClick"])]),_:1}),e(c,null,{default:s(()=>[e(y,{type:"success",plain:"",onClick:u.exportToExcel},{default:s(()=>[v("导出XSLX")]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model"]),e(a,{data:l.recruitData,stripe:"",border:"",style:{"max-width":"100%",width:"100%"}},{default:s(()=>[e(t,{fixed:"",prop:"Username",label:"姓名"}),e(t,{fixed:"",prop:"Telephone",label:"手机号"}),e(t,{prop:"CreatedAt",label:"日期"}),e(t,{prop:"Title",label:"标题"})]),_:1},8,["data"]),C("div",F,[e(n,{class:"ms-auto",background:"",layout:"prev, pager, next","current-page":l.recruitPage,"onUpdate:currentPage":i[4]||(i[4]=p=>l.recruitPage=p),total:l.recruitTotal,onCurrentChange:u.changeRecruitPage},null,8,["current-page","total","onCurrentChange"])])]),_:1})]),_:1},8,["modelValue","onTabClick"])])}const I=A(j,[["render",M]]);export{I as default};
